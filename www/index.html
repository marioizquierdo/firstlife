<!DOCTYPE html>
<html>
  <head>
    <title>Real-life Games Engine</title>

  	<meta name="apple-mobile-web-app-capable" content="yes" />
  	<meta names="apple-mobile-web-app-status-bar-style" content="black-translucent" /> 
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no;" />
  	<meta charset="utf-8">

  	<link rel="stylesheet" href="index.css" />

  	<link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.css" />
  	<script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
  	<script src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script>

    <script src="http://static.firebase.com/v0/firebase.js"></script>

    <script type="text/javascript" charset="utf-8" src="cordova-1.8.1.js"></script>
  </head>
  <body>

    <div id="fb-root"></div>
    <div id="user-info"></div>

    <script>
      (function() {
        var e = document.createElement('script'); e.async = true;
            e.src = document.location.protocol + '//connect.facebook.net/en_US/all.js';
            document.getElementById('fb-root').appendChild(e);
            }());
    </script>

    <script>
      window.fbAsyncInit = function() {
        FB.init({ appId: '450301521661226', 
                  status: true, 
                  cookie: true,
                  xfbml: true,
                  oauth: true});
   
        FB.Event.subscribe('auth.statusChange', handleStatusChange);
      };

      function handleStatusChange(response) {
        document.body.className = response.authResponse ? 'connected' : 'not_connected';

        if (response.authResponse) {
          console.log(response);
          onUserLoggedIn(response);
        }
      }
    
      function onUserLoggedIn(response) {
        $('#login').remove();

        FB.api('/me', function(response) {
          $('#user-info').html('<img src="https://graph.facebook.com/' + response.id + '/picture">' + response.name);
        });
      }

      function loginUser() {
        FB.login(function(response) { }, {scope:'email'});
      }
    </script>

    <div id="login">
     <p><button onClick="loginUser();">Login</button></p>
   </div>

  </body>
</html>
